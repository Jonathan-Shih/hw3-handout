{"files":{"/Users/carolinehughes/nu/cs4530/hw3-handout/src/lib/CoveyTownController.ts":{"language":"typescript","mutants":[{"id":"0","mutatorName":"ConditionalExpression","replacement":"true","statusReason":"src/lib/CoveyTownController.ts(125,61): error TS2345: Argument of type 'ServerConversationArea | undefined' is not assignable to parameter of type 'ServerConversationArea'.\n  Type 'undefined' is not assignable to type 'ServerConversationArea'.\n","status":"CompileError","estimatedNetTime":4,"hitCount":7,"static":false,"coveredBy":["3","7","8","14","16","17","22"],"location":{"end":{"column":21,"line":124},"start":{"column":9,"line":124}}},{"id":"1","mutatorName":"ConditionalExpression","replacement":"false","statusReason":"src/lib/CoveyTownController.ts(125,61): error TS2345: Argument of type 'ServerConversationArea | undefined' is not assignable to parameter of type 'ServerConversationArea'.\n  Type 'undefined' is not assignable to type 'ServerConversationArea'.\n","status":"CompileError","estimatedNetTime":4,"hitCount":7,"static":false,"coveredBy":["3","7","8","14","16","17","22"],"location":{"end":{"column":21,"line":124},"start":{"column":9,"line":124}}},{"id":"8","mutatorName":"ConditionalExpression","replacement":"false","statusReason":"src/lib/CoveyTownController.ts(148,55): error TS2345: Argument of type 'ServerConversationArea | undefined' is not assignable to parameter of type 'ServerConversationArea'.\n  Type 'undefined' is not assignable to type 'ServerConversationArea'.\nsrc/lib/CoveyTownController.ts(151,9): error TS2532: Object is possibly 'undefined'.\nsrc/lib/CoveyTownController.ts(152,80): error TS2345: Argument of type 'ServerConversationArea | undefined' is not assignable to parameter of type 'ServerConversationArea'.\n  Type 'undefined' is not assignable to type 'ServerConversationArea'.\n","status":"CompileError","estimatedNetTime":5,"hitCount":7,"static":false,"coveredBy":["2","6","13","18","20","21","22"],"location":{"end":{"column":42,"line":146},"start":{"column":9,"line":146}}},{"id":"3","mutatorName":"ArrowFunction","replacement":"() => undefined","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\nExpected: \"C26q1gXpPo6aH8SzfnQEe\"\nReceived: undefined\n    at /Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:309:52\n    at step (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:52:23)\n    at Object.next (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:33:53)\n    at fulfilled (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:24:58)","status":"Killed","estimatedNetTime":5,"hitCount":7,"static":false,"testsCompleted":7,"killedBy":["20"],"coveredBy":["2","6","13","18","20","21","22"],"location":{"end":{"column":103,"line":140},"start":{"column":54,"line":140}}},{"id":"5","mutatorName":"ConditionalExpression","replacement":"false","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\nExpected: \"nloIAS9QhXncVZayoZ4ss\"\nReceived: undefined\n    at /Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:309:52\n    at step (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:52:23)\n    at Object.next (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:33:53)\n    at fulfilled (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:24:58)","status":"Killed","estimatedNetTime":1,"hitCount":3,"static":false,"testsCompleted":3,"killedBy":["20"],"coveredBy":["20","21","22"],"location":{"end":{"column":103,"line":140},"start":{"column":62,"line":140}}},{"id":"2","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\nExpected: 0\nReceived: 1\n    at /Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:366:56\n    at step (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:52:23)\n    at Object.next (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:33:53)\n    at fulfilled (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:24:58)","status":"Killed","estimatedNetTime":0,"hitCount":1,"static":false,"testsCompleted":1,"killedBy":["22"],"coveredBy":["22"],"location":{"end":{"column":6,"line":126},"start":{"column":23,"line":124}}},{"id":"11","mutatorName":"ConditionalExpression","replacement":"true","statusReason":"src/lib/CoveyTownController.ts(148,55): error TS2345: Argument of type 'ServerConversationArea | undefined' is not assignable to parameter of type 'ServerConversationArea'.\n  Type 'undefined' is not assignable to type 'ServerConversationArea'.\n","status":"CompileError","estimatedNetTime":1,"hitCount":3,"static":false,"coveredBy":["20","21","22"],"location":{"end":{"column":27,"line":147},"start":{"column":11,"line":147}}},{"id":"6","mutatorName":"EqualityOperator","replacement":"conv.label !== location.conversationLabel","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\nExpected: \"iMu5duLv2MQCve1PXvovh\"\nReceived: undefined\n    at /Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:309:52\n    at step (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:52:23)\n    at Object.next (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:33:53)\n    at fulfilled (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:24:58)","status":"Killed","estimatedNetTime":1,"hitCount":3,"static":false,"testsCompleted":3,"killedBy":["20"],"coveredBy":["20","21","22"],"location":{"end":{"column":103,"line":140},"start":{"column":62,"line":140}}},{"id":"7","mutatorName":"ConditionalExpression","replacement":"true","status":"Survived","estimatedNetTime":5,"hitCount":7,"static":false,"testsCompleted":7,"coveredBy":["2","6","13","18","20","21","22"],"location":{"end":{"column":42,"line":146},"start":{"column":9,"line":146}}},{"id":"9","mutatorName":"EqualityOperator","replacement":"conversation === prevConversation","statusReason":"Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 1\nReceived: 0\n    at /Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:314:45\n    at step (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:52:23)\n    at Object.next (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:33:53)\n    at fulfilled (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:24:58)","status":"Killed","estimatedNetTime":5,"hitCount":7,"static":false,"testsCompleted":7,"killedBy":["20"],"coveredBy":["2","6","13","18","20","21","22"],"location":{"end":{"column":42,"line":146},"start":{"column":9,"line":146}}},{"id":"13","mutatorName":"BlockStatement","replacement":"{}","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":8,"line":149},"start":{"column":29,"line":147}}},{"id":"12","mutatorName":"ConditionalExpression","replacement":"false","statusReason":"src/lib/CoveyTownController.ts(148,55): error TS2345: Argument of type 'ServerConversationArea | undefined' is not assignable to parameter of type 'ServerConversationArea'.\n  Type 'undefined' is not assignable to type 'ServerConversationArea'.\n","status":"CompileError","estimatedNetTime":1,"hitCount":3,"static":false,"coveredBy":["20","21","22"],"location":{"end":{"column":27,"line":147},"start":{"column":11,"line":147}}},{"id":"10","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 1\nReceived: 0\n    at /Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:314:45\n    at step (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:52:23)\n    at Object.next (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:33:53)\n    at fulfilled (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:24:58)","status":"Killed","estimatedNetTime":1,"hitCount":3,"static":false,"testsCompleted":3,"killedBy":["20"],"coveredBy":["20","21","22"],"location":{"end":{"column":6,"line":154},"start":{"column":44,"line":146}}},{"id":"4","mutatorName":"ConditionalExpression","replacement":"true","status":"Survived","estimatedNetTime":1,"hitCount":3,"static":false,"testsCompleted":3,"coveredBy":["20","21","22"],"location":{"end":{"column":103,"line":140},"start":{"column":62,"line":140}}},{"id":"14","mutatorName":"ConditionalExpression","replacement":"true","statusReason":"src/lib/CoveyTownController.ts(151,9): error TS2532: Object is possibly 'undefined'.\nsrc/lib/CoveyTownController.ts(152,80): error TS2345: Argument of type 'ServerConversationArea | undefined' is not assignable to parameter of type 'ServerConversationArea'.\n  Type 'undefined' is not assignable to type 'ServerConversationArea'.\n","status":"CompileError","estimatedNetTime":1,"hitCount":3,"static":false,"coveredBy":["20","21","22"],"location":{"end":{"column":23,"line":150},"start":{"column":11,"line":150}}},{"id":"15","mutatorName":"ConditionalExpression","replacement":"false","statusReason":"src/lib/CoveyTownController.ts(151,9): error TS2532: Object is possibly 'undefined'.\nsrc/lib/CoveyTownController.ts(152,80): error TS2345: Argument of type 'ServerConversationArea | undefined' is not assignable to parameter of type 'ServerConversationArea'.\n  Type 'undefined' is not assignable to type 'ServerConversationArea'.\n","status":"CompileError","estimatedNetTime":1,"hitCount":3,"static":false,"coveredBy":["20","21","22"],"location":{"end":{"column":23,"line":150},"start":{"column":11,"line":150}}},{"id":"17","mutatorName":"ArrowFunction","replacement":"() => undefined","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledTimes(expected)\n\nExpected number of calls: 1\nReceived number of calls: 0\n    at /Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:337:54\n    at step (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:52:23)\n    at Object.next (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:33:53)\n    at fulfilled (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:24:58)","status":"Killed","estimatedNetTime":1,"hitCount":3,"static":false,"testsCompleted":3,"killedBy":["21"],"coveredBy":["20","21","22"],"location":{"end":{"column":93,"line":152},"start":{"column":33,"line":152}}},{"id":"18","mutatorName":"ArrowFunction","replacement":"() => undefined","statusReason":"Error: expect(jest.fn()).toBeCalledWith(...expected)\n\nExpected: {\"_activeConversationArea\": undefined, \"_id\": \"2JbPU92WNSiBnqtCcxNgf\", \"_userName\": \"test player\", \"location\": {\"moving\": true, \"rotation\": \"back\", \"x\": 1, \"y\": 44}}\n\nNumber of calls: 0\n    at /Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:66:72\n    at Array.forEach (<anonymous>)\n    at /Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:66:21\n    at step (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:52:23)\n    at Object.next (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:33:53)\n    at fulfilled (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:24:58)","status":"Killed","estimatedNetTime":5,"hitCount":7,"static":false,"testsCompleted":7,"killedBy":["2"],"coveredBy":["2","6","13","18","20","21","22"],"location":{"end":{"column":71,"line":156},"start":{"column":29,"line":156}}},{"id":"19","mutatorName":"ArrowFunction","replacement":"() => undefined","status":"Survived","estimatedNetTime":0,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["22"],"location":{"end":{"column":94,"line":169},"start":{"column":76,"line":169}}},{"id":"16","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 1\nReceived: 0\n    at /Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:314:45\n    at step (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:52:23)\n    at Object.next (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:33:53)\n    at fulfilled (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/lib/CoveyTownController.test.ts:24:58)","status":"Killed","estimatedNetTime":1,"hitCount":3,"static":false,"testsCompleted":3,"killedBy":["20"],"coveredBy":["20","21","22"],"location":{"end":{"column":8,"line":153},"start":{"column":25,"line":150}}},{"id":"21","mutatorName":"ConditionalExpression","replacement":"false","status":"Survived","estimatedNetTime":0,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["22"],"location":{"end":{"column":94,"line":169},"start":{"column":79,"line":169}}},{"id":"20","mutatorName":"ConditionalExpression","replacement":"true","status":"Survived","estimatedNetTime":0,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["22"],"location":{"end":{"column":94,"line":169},"start":{"column":79,"line":169}}},{"id":"22","mutatorName":"EqualityOperator","replacement":"p !== player.id","status":"Survived","estimatedNetTime":0,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["22"],"location":{"end":{"column":94,"line":169},"start":{"column":79,"line":169}}},{"id":"23","mutatorName":"ConditionalExpression","replacement":"true","status":"Survived","estimatedNetTime":0,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["22"],"location":{"end":{"column":48,"line":170},"start":{"column":9,"line":170}}},{"id":"25","mutatorName":"EqualityOperator","replacement":"conversation.occupantsByID.length !== 0","status":"Survived","estimatedNetTime":0,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["22"],"location":{"end":{"column":48,"line":170},"start":{"column":9,"line":170}}},{"id":"24","mutatorName":"ConditionalExpression","replacement":"false","status":"Survived","estimatedNetTime":0,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["22"],"location":{"end":{"column":48,"line":170},"start":{"column":9,"line":170}}},{"id":"26","mutatorName":"BlockStatement","replacement":"{}","status":"Survived","estimatedNetTime":0,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["22"],"location":{"end":{"column":6,"line":173},"start":{"column":50,"line":170}}},{"id":"27","mutatorName":"ArrowFunction","replacement":"() => undefined","status":"Survived","estimatedNetTime":0,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["22"],"location":{"end":{"column":101,"line":171},"start":{"column":72,"line":171}}},{"id":"28","mutatorName":"ConditionalExpression","replacement":"true","status":"Survived","estimatedNetTime":0,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["22"],"location":{"end":{"column":101,"line":171},"start":{"column":80,"line":171}}},{"id":"29","mutatorName":"ConditionalExpression","replacement":"false","status":"Survived","estimatedNetTime":0,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["22"],"location":{"end":{"column":101,"line":171},"start":{"column":80,"line":171}}},{"id":"30","mutatorName":"EqualityOperator","replacement":"conv !== conversation","status":"Survived","estimatedNetTime":0,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["22"],"location":{"end":{"column":101,"line":171},"start":{"column":80,"line":171}}},{"id":"31","mutatorName":"ArrowFunction","replacement":"() => undefined","status":"Survived","estimatedNetTime":0,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["22"],"location":{"end":{"column":93,"line":172},"start":{"column":31,"line":172}}},{"id":"32","mutatorName":"BlockStatement","replacement":"{}","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":6,"line":175},"start":{"column":12,"line":173}}},{"id":"33","mutatorName":"ArrowFunction","replacement":"() => undefined","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":91,"line":174},"start":{"column":31,"line":174}}},{"id":"34","mutatorName":"BlockStatement","replacement":"{}","statusReason":"src/lib/CoveyTownController.ts(191,67): error TS2355: A function whose declared type is neither 'void' nor 'any' must return a value.\n","status":"CompileError","estimatedNetTime":561,"hitCount":5,"static":false,"coveredBy":["19","20","21","22","23"],"location":{"end":{"column":4,"line":210},"start":{"column":75,"line":191}}},{"id":"38","mutatorName":"ConditionalExpression","replacement":"true","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":93,"line":193},"start":{"column":35,"line":193}}},{"id":"39","mutatorName":"ConditionalExpression","replacement":"false","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":93,"line":193},"start":{"column":35,"line":193}}},{"id":"35","mutatorName":"ConditionalExpression","replacement":"true","statusReason":"Error: Error processing request: Unable to create conversation area XvmoHyfZi9vJ4QkrXo4oR with topic 8DhGZCXpf2Ykj9GUoafmm\n    at Function.Object.<anonymous>.TownsServiceClient.unwrapOrThrowError (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:149:11)\n    at TownsServiceClient.<anonymous> (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:179:31)\n    at step (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:33:23)\n    at Object.next (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:14:53)\n    at fulfilled (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","status":"Killed","estimatedNetTime":561,"hitCount":5,"static":false,"testsCompleted":5,"killedBy":["23"],"coveredBy":["19","20","21","22","23"],"location":{"end":{"column":6,"line":194},"start":{"column":9,"line":192}}},{"id":"37","mutatorName":"ArrowFunction","replacement":"() => undefined","status":"Survived","estimatedNetTime":561,"hitCount":5,"static":false,"testsCompleted":5,"coveredBy":["19","20","21","22","23"],"location":{"end":{"column":93,"line":193},"start":{"column":7,"line":193}}},{"id":"36","mutatorName":"ConditionalExpression","replacement":"false","status":"Survived","estimatedNetTime":561,"hitCount":5,"static":false,"testsCompleted":5,"coveredBy":["19","20","21","22","23"],"location":{"end":{"column":6,"line":194},"start":{"column":9,"line":192}}},{"id":"41","mutatorName":"BooleanLiteral","replacement":"true","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":19,"line":195},"start":{"column":14,"line":195}}},{"id":"40","mutatorName":"EqualityOperator","replacement":"eachExistingConversation.label !== _conversationArea.label","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":93,"line":193},"start":{"column":35,"line":193}}},{"id":"42","mutatorName":"ConditionalExpression","replacement":"true","statusReason":"Error: Error processing request: Unable to create conversation area 7DROkgqcK66yVVcj9OF22 with topic aiuAji8Pdltnb_dtxKmlg\n    at Function.Object.<anonymous>.TownsServiceClient.unwrapOrThrowError (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:149:11)\n    at TownsServiceClient.<anonymous> (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:179:31)\n    at step (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:33:23)\n    at Object.next (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:14:53)\n    at fulfilled (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","status":"Killed","estimatedNetTime":561,"hitCount":5,"static":false,"testsCompleted":5,"killedBy":["23"],"coveredBy":["19","20","21","22","23"],"location":{"end":{"column":39,"line":196},"start":{"column":9,"line":196}}},{"id":"43","mutatorName":"ConditionalExpression","replacement":"false","status":"Survived","estimatedNetTime":561,"hitCount":5,"static":false,"testsCompleted":5,"coveredBy":["19","20","21","22","23"],"location":{"end":{"column":39,"line":196},"start":{"column":9,"line":196}}},{"id":"46","mutatorName":"BlockStatement","replacement":"{}","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":6,"line":198},"start":{"column":40,"line":196}}},{"id":"47","mutatorName":"BooleanLiteral","replacement":"true","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":19,"line":197},"start":{"column":14,"line":197}}},{"id":"44","mutatorName":"EqualityOperator","replacement":"_conversationArea.topic !== ''","statusReason":"Error: Error processing request: Unable to create conversation area _61Wv5KjVGvWeOEEG3g3p with topic Jt5Ey5PZD0ouZrO6yf3Jv\n    at Function.Object.<anonymous>.TownsServiceClient.unwrapOrThrowError (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:149:11)\n    at TownsServiceClient.<anonymous> (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:179:31)\n    at step (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:33:23)\n    at Object.next (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:14:53)\n    at fulfilled (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","status":"Killed","estimatedNetTime":561,"hitCount":5,"static":false,"testsCompleted":5,"killedBy":["23"],"coveredBy":["19","20","21","22","23"],"location":{"end":{"column":39,"line":196},"start":{"column":9,"line":196}}},{"id":"45","mutatorName":"StringLiteral","replacement":"\"Stryker was here!\"","status":"Survived","estimatedNetTime":561,"hitCount":5,"static":false,"testsCompleted":5,"coveredBy":["19","20","21","22","23"],"location":{"end":{"column":39,"line":196},"start":{"column":37,"line":196}}},{"id":"48","mutatorName":"ConditionalExpression","replacement":"true","statusReason":"Error: Error processing request: Unable to create conversation area 3SBvJRQzlGISR9pM-Kd_T with topic XUIn7uau3uiJz7iSxwk-D\n    at Function.Object.<anonymous>.TownsServiceClient.unwrapOrThrowError (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:149:11)\n    at TownsServiceClient.<anonymous> (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:179:31)\n    at step (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:33:23)\n    at Object.next (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:14:53)\n    at fulfilled (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","status":"Killed","estimatedNetTime":561,"hitCount":5,"static":false,"testsCompleted":5,"killedBy":["23"],"coveredBy":["19","20","21","22","23"],"location":{"end":{"column":123,"line":200},"start":{"column":9,"line":199}}},{"id":"49","mutatorName":"ConditionalExpression","replacement":"false","status":"Survived","estimatedNetTime":561,"hitCount":5,"static":false,"testsCompleted":5,"coveredBy":["19","20","21","22","23"],"location":{"end":{"column":123,"line":200},"start":{"column":9,"line":199}}},{"id":"52","mutatorName":"BlockStatement","replacement":"{}","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":6,"line":202},"start":{"column":124,"line":200}}},{"id":"53","mutatorName":"BooleanLiteral","replacement":"true","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":19,"line":201},"start":{"column":14,"line":201}}},{"id":"50","mutatorName":"EqualityOperator","replacement":"this._conversationAreas.find(eachExistingConversation => CoveyTownController.boxesOverlap(eachExistingConversation.boundingBox, _conversationArea.boundingBox)) === undefined","statusReason":"Error: Error processing request: Unable to create conversation area YSvXHTnzim_I893-MUcpm with topic dPv0y_8ehNwbVhelSqK2T\n    at Function.Object.<anonymous>.TownsServiceClient.unwrapOrThrowError (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:149:11)\n    at TownsServiceClient.<anonymous> (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:179:31)\n    at step (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:33:23)\n    at Object.next (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:14:53)\n    at fulfilled (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","status":"Killed","estimatedNetTime":561,"hitCount":5,"static":false,"testsCompleted":5,"killedBy":["23"],"coveredBy":["19","20","21","22","23"],"location":{"end":{"column":123,"line":200},"start":{"column":9,"line":199}}},{"id":"51","mutatorName":"ArrowFunction","replacement":"() => undefined","status":"Survived","estimatedNetTime":561,"hitCount":5,"static":false,"testsCompleted":5,"coveredBy":["19","20","21","22","23"],"location":{"end":{"column":108,"line":200},"start":{"column":38,"line":199}}},{"id":"55","mutatorName":"BlockStatement","replacement":"{}","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":91,"line":206},"start":{"column":49,"line":206}}},{"id":"56","mutatorName":"ArrowFunction","replacement":"() => undefined","statusReason":"src/lib/CoveyTownController.ts(207,5): error TS2322: Type 'undefined[]' is not assignable to type 'string[]'.\n  Type 'undefined' is not assignable to type 'string'.\n","status":"CompileError","estimatedNetTime":561,"hitCount":5,"static":false,"coveredBy":["19","20","21","22","23"],"location":{"end":{"column":78,"line":207},"start":{"column":59,"line":207}}},{"id":"54","mutatorName":"ArrowFunction","replacement":"() => undefined","status":"Survived","estimatedNetTime":561,"hitCount":5,"static":false,"testsCompleted":5,"coveredBy":["19","20","21","22","23"],"location":{"end":{"column":93,"line":205},"start":{"column":59,"line":205}}},{"id":"59","mutatorName":"ArrowFunction","replacement":"() => undefined","statusReason":"src/lib/CoveyTownController.ts(222,32): error TS2554: Expected 0 arguments, but got 1.\nsrc/lib/CoveyTownController.ts(223,32): error TS2554: Expected 0 arguments, but got 1.\nsrc/lib/CoveyTownController.ts(224,23): error TS2532: Object is possibly 'undefined'.\nsrc/lib/CoveyTownController.ts(224,35): error TS2532: Object is possibly 'undefined'.\nsrc/lib/CoveyTownController.ts(224,47): error TS2532: Object is possibly 'undefined'.\nsrc/lib/CoveyTownController.ts(224,59): error TS2532: Object is possibly 'undefined'.\nsrc/lib/CoveyTownController.ts(224,71): error TS2532: Object is possibly 'undefined'.\nsrc/lib/CoveyTownController.ts(224,83): error TS2532: Object is possibly 'undefined'.\nsrc/lib/CoveyTownController.ts(224,95): error TS2532: Object is possibly 'undefined'.\nsrc/lib/CoveyTownController.ts(224,107): error TS2532: Object is possibly 'undefined'.\n","status":"CompileError","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":162,"line":221},"start":{"column":26,"line":221}}},{"id":"60","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"src/lib/CoveyTownController.ts(224,29): error TS2339: Property 'x1' does not exist on type '{}'.\nsrc/lib/CoveyTownController.ts(224,41): error TS2339: Property 'x2' does not exist on type '{}'.\nsrc/lib/CoveyTownController.ts(224,53): error TS2339: Property 'x1' does not exist on type '{}'.\nsrc/lib/CoveyTownController.ts(224,65): error TS2339: Property 'x2' does not exist on type '{}'.\nsrc/lib/CoveyTownController.ts(224,77): error TS2339: Property 'y1' does not exist on type '{}'.\nsrc/lib/CoveyTownController.ts(224,89): error TS2339: Property 'y2' does not exist on type '{}'.\nsrc/lib/CoveyTownController.ts(224,101): error TS2339: Property 'y1' does not exist on type '{}'.\nsrc/lib/CoveyTownController.ts(224,113): error TS2339: Property 'y2' does not exist on type '{}'.\n","status":"CompileError","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":161,"line":221},"start":{"column":49,"line":221}}},{"id":"61","mutatorName":"ArithmeticOperator","replacement":"box.x + box.width / 2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":76,"line":221},"start":{"column":55,"line":221}}},{"id":"62","mutatorName":"ArithmeticOperator","replacement":"box.width * 2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":76,"line":221},"start":{"column":63,"line":221}}},{"id":"57","mutatorName":"ArrowFunction","replacement":"() => undefined","status":"Survived","estimatedNetTime":561,"hitCount":5,"static":false,"testsCompleted":5,"coveredBy":["19","20","21","22","23"],"location":{"end":{"column":84,"line":208},"start":{"column":29,"line":208}}},{"id":"58","mutatorName":"BooleanLiteral","replacement":"false","statusReason":"Error: Error processing request: Unable to create conversation area aUAowQMitIYuM1PUbdULx with topic W9Qye-7so2SV92isCfHip\n    at Function.Object.<anonymous>.TownsServiceClient.unwrapOrThrowError (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:149:11)\n    at TownsServiceClient.<anonymous> (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:179:31)\n    at step (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:33:23)\n    at Object.next (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:14:53)\n    at fulfilled (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/TownsServiceClient.ts:5:58)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)","status":"Killed","estimatedNetTime":561,"hitCount":5,"static":false,"testsCompleted":5,"killedBy":["23"],"coveredBy":["19","20","21","22","23"],"location":{"end":{"column":16,"line":209},"start":{"column":12,"line":209}}},{"id":"63","mutatorName":"ArithmeticOperator","replacement":"box.x - box.width / 2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":103,"line":221},"start":{"column":82,"line":221}}},{"id":"64","mutatorName":"ArithmeticOperator","replacement":"box.width * 2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":103,"line":221},"start":{"column":90,"line":221}}},{"id":"65","mutatorName":"ArithmeticOperator","replacement":"box.y + box.height / 2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":131,"line":221},"start":{"column":109,"line":221}}},{"id":"66","mutatorName":"ArithmeticOperator","replacement":"box.height * 2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":131,"line":221},"start":{"column":117,"line":221}}},{"id":"67","mutatorName":"ArithmeticOperator","replacement":"box.y - box.height / 2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":159,"line":221},"start":{"column":137,"line":221}}},{"id":"68","mutatorName":"ArithmeticOperator","replacement":"box.height * 2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":159,"line":221},"start":{"column":145,"line":221}}},{"id":"69","mutatorName":"ConditionalExpression","replacement":"true","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":115,"line":224},"start":{"column":23,"line":224}}},{"id":"70","mutatorName":"ConditionalExpression","replacement":"false","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":115,"line":224},"start":{"column":23,"line":224}}},{"id":"71","mutatorName":"LogicalOperator","replacement":"(rect1.x1 >= rect2.x2 || rect2.x1 >= rect1.x2 || rect1.y1 >= rect2.y2) && rect2.y1 >= rect1.y2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":115,"line":224},"start":{"column":23,"line":224}}},{"id":"72","mutatorName":"ConditionalExpression","replacement":"false","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":91,"line":224},"start":{"column":23,"line":224}}},{"id":"73","mutatorName":"LogicalOperator","replacement":"(rect1.x1 >= rect2.x2 || rect2.x1 >= rect1.x2) && rect1.y1 >= rect2.y2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":91,"line":224},"start":{"column":23,"line":224}}},{"id":"74","mutatorName":"ConditionalExpression","replacement":"false","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":67,"line":224},"start":{"column":23,"line":224}}},{"id":"75","mutatorName":"LogicalOperator","replacement":"rect1.x1 >= rect2.x2 && rect2.x1 >= rect1.x2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":67,"line":224},"start":{"column":23,"line":224}}},{"id":"76","mutatorName":"ConditionalExpression","replacement":"false","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":43,"line":224},"start":{"column":23,"line":224}}},{"id":"77","mutatorName":"EqualityOperator","replacement":"rect1.x1 > rect2.x2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":43,"line":224},"start":{"column":23,"line":224}}},{"id":"78","mutatorName":"EqualityOperator","replacement":"rect1.x1 < rect2.x2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":43,"line":224},"start":{"column":23,"line":224}}},{"id":"79","mutatorName":"ConditionalExpression","replacement":"false","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":67,"line":224},"start":{"column":47,"line":224}}},{"id":"80","mutatorName":"EqualityOperator","replacement":"rect2.x1 > rect1.x2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":67,"line":224},"start":{"column":47,"line":224}}},{"id":"81","mutatorName":"EqualityOperator","replacement":"rect2.x1 < rect1.x2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":67,"line":224},"start":{"column":47,"line":224}}},{"id":"82","mutatorName":"ConditionalExpression","replacement":"false","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":91,"line":224},"start":{"column":71,"line":224}}},{"id":"83","mutatorName":"EqualityOperator","replacement":"rect1.y1 > rect2.y2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":91,"line":224},"start":{"column":71,"line":224}}},{"id":"84","mutatorName":"EqualityOperator","replacement":"rect1.y1 < rect2.y2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":91,"line":224},"start":{"column":71,"line":224}}},{"id":"85","mutatorName":"ConditionalExpression","replacement":"false","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":115,"line":224},"start":{"column":95,"line":224}}},{"id":"86","mutatorName":"EqualityOperator","replacement":"rect2.y1 > rect1.y2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":115,"line":224},"start":{"column":95,"line":224}}},{"id":"87","mutatorName":"EqualityOperator","replacement":"rect2.y1 < rect1.y2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":115,"line":224},"start":{"column":95,"line":224}}},{"id":"88","mutatorName":"BooleanLiteral","replacement":"noOverlap","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":22,"line":225},"start":{"column":12,"line":225}}}],"source":"import { customAlphabet, nanoid } from 'nanoid';\nimport { BoundingBox, ServerConversationArea } from '../client/TownsServiceClient';\nimport { UserLocation } from '../CoveyTypes';\nimport CoveyTownListener from '../types/CoveyTownListener';\nimport Player from '../types/Player';\nimport PlayerSession from '../types/PlayerSession';\nimport IVideoClient from './IVideoClient';\nimport TwilioVideo from './TwilioVideo';\n\nconst friendlyNanoID = customAlphabet('1234567890ABCDEF', 8);\n\n/**\n * The CoveyTownController implements the logic for each town: managing the various events that\n * can occur (e.g. joining a town, moving, leaving a town)\n */\nexport default class CoveyTownController {\n  get capacity(): number {\n    return this._capacity;\n  }\n\n  set isPubliclyListed(value: boolean) {\n    this._isPubliclyListed = value;\n  }\n\n  get isPubliclyListed(): boolean {\n    return this._isPubliclyListed;\n  }\n\n  get townUpdatePassword(): string {\n    return this._townUpdatePassword;\n  }\n\n  get players(): Player[] {\n    return this._players;\n  }\n\n  get occupancy(): number {\n    return this._listeners.length;\n  }\n\n  get friendlyName(): string {\n    return this._friendlyName;\n  }\n\n  set friendlyName(value: string) {\n    this._friendlyName = value;\n  }\n\n  get coveyTownID(): string {\n    return this._coveyTownID;\n  }\n\n  get conversationAreas(): ServerConversationArea[] {\n    return this._conversationAreas;\n  }\n\n  /** The list of players currently in the town * */\n  private _players: Player[] = [];\n\n  /** The list of valid sessions for this town * */\n  private _sessions: PlayerSession[] = [];\n\n  /** The videoClient that this CoveyTown will use to provision video resources * */\n  private _videoClient: IVideoClient = TwilioVideo.getInstance();\n\n  /** The list of CoveyTownListeners that are subscribed to events in this town * */\n  private _listeners: CoveyTownListener[] = [];\n\n  /** The list of currently active ConversationAreas in this town */\n  private _conversationAreas: ServerConversationArea[] = [];\n\n  private readonly _coveyTownID: string;\n\n  private _friendlyName: string;\n\n  private readonly _townUpdatePassword: string;\n\n  private _isPubliclyListed: boolean;\n\n  private _capacity: number;\n\n  constructor(friendlyName: string, isPubliclyListed: boolean) {\n    this._coveyTownID = process.env.DEMO_TOWN_ID === friendlyName ? friendlyName : friendlyNanoID();\n    this._capacity = 50;\n    this._townUpdatePassword = nanoid(24);\n    this._isPubliclyListed = isPubliclyListed;\n    this._friendlyName = friendlyName;\n  }\n\n  /**\n   * Adds a player to this Covey Town, provisioning the necessary credentials for the\n   * player, and returning them\n   *\n   * @param newPlayer The new player to add to the town\n   */\n  async addPlayer(newPlayer: Player): Promise<PlayerSession> {\n    const theSession = new PlayerSession(newPlayer);\n\n    this._sessions.push(theSession);\n    this._players.push(newPlayer);\n\n    // Create a video token for this user to join this town\n    theSession.videoToken = await this._videoClient.getTokenForTown(\n      this._coveyTownID,\n      newPlayer.id,\n    );\n\n    // Notify other players that this player has joined\n    this._listeners.forEach(listener => listener.onPlayerJoined(newPlayer));\n\n    return theSession;\n  }\n\n  /**\n   * Destroys all data related to a player in this town.\n   *\n   * @param session PlayerSession to destroy\n   */\n  destroySession(session: PlayerSession): void {\n    this._players = this._players.filter(p => p.id !== session.player.id);\n    this._sessions = this._sessions.filter(s => s.sessionToken !== session.sessionToken);\n    this._listeners.forEach(listener => listener.onPlayerDisconnected(session.player));\n    const conversation = session.player.activeConversationArea;\n    if (conversation) {\n      this.removePlayerFromConversationArea(session.player, conversation);\n    }\n  }\n\n  /**\n   * Updates the location of a player within the town\n   * \n   * If the player has changed conversation areas, this method also updates the\n   * corresponding ConversationArea objects tracked by the town controller, and dispatches\n   * any onConversationUpdated events as appropriate\n   * \n   * @param player Player to update location for\n   * @param location New location for this player\n   */\n  updatePlayerLocation(player: Player, location: UserLocation): void {\n    const conversation = this.conversationAreas.find(conv => conv.label === location.conversationLabel);\n    const prevConversation = player.activeConversationArea;\n\n    player.location = location;\n    player.activeConversationArea = conversation;\n\n    if (conversation !== prevConversation) {\n      if (prevConversation) {\n        this.removePlayerFromConversationArea(player, prevConversation);\n      }\n      if (conversation) {\n        conversation.occupantsByID.push(player.id);\n        this._listeners.forEach(listener => listener.onConversationAreaUpdated(conversation));\n      }\n    }\n\n    this._listeners.forEach(listener => listener.onPlayerMoved(player));\n  }\n\n  /**\n   * Removes a player from a conversation area, updating the conversation area's occupants list, \n   * and emitting the appropriate message (area updated or area destroyed)\n   * \n   * Does not update the player's activeConversationArea property.\n   * \n   * @param player Player to remove from conversation area\n   * @param conversation Conversation area to remove player from\n   */\n  removePlayerFromConversationArea(player: Player, conversation: ServerConversationArea) : void {\n    conversation.occupantsByID.splice(conversation.occupantsByID.findIndex(p=>p === player.id), 1);\n    if (conversation.occupantsByID.length === 0) {\n      this._conversationAreas.splice(this._conversationAreas.findIndex(conv => conv === conversation), 1);\n      this._listeners.forEach(listener => listener.onConversationAreaDestroyed(conversation));\n    } else {\n      this._listeners.forEach(listener => listener.onConversationAreaUpdated(conversation));\n    }\n  }\n\n  /**\n   * Creates a new conversation area in this town if there is not currently an active\n   * conversation with the same label.\n   *\n   * Adds any players who are in the region defined by the conversation area to it.\n   *\n   * Notifies any CoveyTownListeners that the conversation has been updated\n   *\n   * @param _conversationArea Information describing the conversation area to create. Ignores any\n   *  occupantsById that are set on the conversation area that is passed to this method.\n   *\n   * @returns true if the conversation is successfully created, or false if not\n   */\n  addConversationArea(_conversationArea: ServerConversationArea): boolean {\n    if (this._conversationAreas.find(\n      eachExistingConversation => eachExistingConversation.label === _conversationArea.label,\n    ))\n      return false;\n    if (_conversationArea.topic === ''){\n      return false;\n    }\n    if (this._conversationAreas.find(eachExistingConversation => \n      CoveyTownController.boxesOverlap(eachExistingConversation.boundingBox, _conversationArea.boundingBox)) !== undefined){\n      return false;\n    }\n    const newArea :ServerConversationArea = Object.assign(_conversationArea);\n    this._conversationAreas.push(newArea);\n    const playersInThisConversation = this.players.filter(player => player.isWithin(newArea));\n    playersInThisConversation.forEach(player => {player.activeConversationArea = newArea;});\n    newArea.occupantsByID = playersInThisConversation.map(player => player.id);\n    this._listeners.forEach(listener => listener.onConversationAreaUpdated(newArea));\n    return true;\n  }\n\n  /**\n   * Detects whether two bounding boxes overlap and share any points\n   * \n   * @param box1 \n   * @param box2 \n   * @returns true if the boxes overlap, otherwise false\n   */\n  static boxesOverlap(box1: BoundingBox, box2: BoundingBox):boolean{\n    // Helper function to extract the top left (x1,y1) and bottom right corner (x2,y2) of each bounding box\n    const toRectPoints = (box: BoundingBox) => ({ x1: box.x - box.width / 2, x2: box.x + box.width / 2, y1: box.y - box.height / 2, y2: box.y + box.height / 2 });\n    const rect1 = toRectPoints(box1);\n    const rect2 = toRectPoints(box2);\n    const noOverlap = rect1.x1 >= rect2.x2 || rect2.x1 >= rect1.x2 || rect1.y1 >= rect2.y2 || rect2.y1 >= rect1.y2;\n    return !noOverlap;\n  }\n\n  /**\n   * Subscribe to events from this town. Callers should make sure to\n   * unsubscribe when they no longer want those events by calling removeTownListener\n   *\n   * @param listener New listener\n   */\n  addTownListener(listener: CoveyTownListener): void {\n    this._listeners.push(listener);\n  }\n\n  /**\n   * Unsubscribe from events in this town.\n   *\n   * @param listener The listener to unsubscribe, must be a listener that was registered\n   * with addTownListener, or otherwise will be a no-op\n   */\n  removeTownListener(listener: CoveyTownListener): void {\n    this._listeners = this._listeners.filter(v => v !== listener);\n  }\n\n  /**\n   * Fetch a player's session based on the provided session token. Returns undefined if the\n   * session token is not valid.\n   *\n   * @param token\n   */\n  getSessionByToken(token: string): PlayerSession | undefined {\n    return this._sessions.find(p => p.sessionToken === token);\n  }\n\n  disconnectAllPlayers(): void {\n    this._listeners.forEach(listener => listener.onTownDestroyed());\n  }\n\n}\n"},"/Users/carolinehughes/nu/cs4530/hw3-handout/src/requestHandlers/CoveyTownRequestHandlers.ts":{"language":"typescript","mutants":[{"id":"89","mutatorName":"BlockStatement","replacement":"{}","statusReason":"src/requestHandlers/CoveyTownRequestHandlers.ts(184,94): error TS2355: A function whose declared type is neither 'void' nor 'any' must return a value.\n","status":"CompileError","estimatedNetTime":561,"hitCount":2,"static":false,"coveredBy":["23","24"],"location":{"end":{"column":2,"line":199},"start":{"column":133,"line":184}}},{"id":"90","mutatorName":"BooleanLiteral","replacement":"townController?.getSessionByToken(_requestData.sessionToken)","statusReason":"src/requestHandlers/CoveyTownRequestHandlers.ts(192,19): error TS2532: Object is possibly 'undefined'.\n","status":"CompileError","estimatedNetTime":561,"hitCount":2,"static":false,"coveredBy":["23","24"],"location":{"end":{"column":68,"line":187},"start":{"column":7,"line":187}}},{"id":"91","mutatorName":"ConditionalExpression","replacement":"true","statusReason":"src/requestHandlers/CoveyTownRequestHandlers.ts(192,19): error TS2532: Object is possibly 'undefined'.\n","status":"CompileError","estimatedNetTime":561,"hitCount":2,"static":false,"coveredBy":["23","24"],"location":{"end":{"column":68,"line":187},"start":{"column":7,"line":187}}},{"id":"92","mutatorName":"ConditionalExpression","replacement":"false","statusReason":"src/requestHandlers/CoveyTownRequestHandlers.ts(192,19): error TS2532: Object is possibly 'undefined'.\n","status":"CompileError","estimatedNetTime":561,"hitCount":2,"static":false,"coveredBy":["23","24"],"location":{"end":{"column":68,"line":187},"start":{"column":7,"line":187}}},{"id":"93","mutatorName":"OptionalChaining","replacement":"townController.getSessionByToken","statusReason":"src/requestHandlers/CoveyTownRequestHandlers.ts(187,8): error TS2532: Object is possibly 'undefined'.\nsrc/requestHandlers/CoveyTownRequestHandlers.ts(192,19): error TS2532: Object is possibly 'undefined'.\n","status":"CompileError","estimatedNetTime":561,"hitCount":2,"static":false,"coveredBy":["23","24"],"location":{"end":{"column":41,"line":187},"start":{"column":8,"line":187}}},{"id":"94","mutatorName":"BlockStatement","replacement":"{}","statusReason":"src/requestHandlers/CoveyTownRequestHandlers.ts(188,19): error TS2532: Object is possibly 'undefined'.\n","status":"CompileError","estimatedNetTime":1,"hitCount":1,"static":false,"coveredBy":["24"],"location":{"end":{"column":4,"line":191},"start":{"column":69,"line":187}}},{"id":"95","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"src/requestHandlers/CoveyTownRequestHandlers.ts(188,5): error TS2741: Property 'isOK' is missing in type '{}' but required in type 'ResponseEnvelope<Record<string, null>>'.\n","status":"CompileError","estimatedNetTime":1,"hitCount":1,"static":false,"coveredBy":["24"],"location":{"end":{"column":6,"line":190},"start":{"column":12,"line":188}}},{"id":"98","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"src/requestHandlers/CoveyTownRequestHandlers.ts(194,3): error TS2741: Property 'isOK' is missing in type '{}' but required in type 'ResponseEnvelope<Record<string, null>>'.\n","status":"CompileError","estimatedNetTime":560,"hitCount":1,"static":false,"coveredBy":["23"],"location":{"end":{"column":4,"line":198},"start":{"column":10,"line":194}}},{"id":"96","mutatorName":"BooleanLiteral","replacement":"true","status":"Survived","estimatedNetTime":1,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["24"],"location":{"end":{"column":18,"line":189},"start":{"column":13,"line":189}}},{"id":"97","mutatorName":"StringLiteral","replacement":"``","status":"Survived","estimatedNetTime":1,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["24"],"location":{"end":{"column":168,"line":189},"start":{"column":43,"line":189}}},{"id":"100","mutatorName":"StringLiteral","replacement":"``","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":150,"line":197},"start":{"column":25,"line":197}}},{"id":"99","mutatorName":"BooleanLiteral","replacement":"success","status":"Survived","estimatedNetTime":560,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["23"],"location":{"end":{"column":22,"line":197},"start":{"column":14,"line":197}}}],"source":"import assert from 'assert';\nimport { Socket } from 'socket.io';\nimport Player from '../types/Player';\nimport { CoveyTownList, UserLocation } from '../CoveyTypes';\nimport CoveyTownListener from '../types/CoveyTownListener';\nimport CoveyTownsStore from '../lib/CoveyTownsStore';\nimport { ConversationAreaCreateRequest, ServerConversationArea } from '../client/TownsServiceClient';\n\n/**\n * The format of a request to join a Town in Covey.Town, as dispatched by the server middleware\n */\nexport interface TownJoinRequest {\n  /** userName of the player that would like to join * */\n  userName: string;\n  /** ID of the town that the player would like to join * */\n  coveyTownID: string;\n}\n\n/**\n * The format of a response to join a Town in Covey.Town, as returned by the handler to the server\n * middleware\n */\nexport interface TownJoinResponse {\n  /** Unique ID that represents this player * */\n  coveyUserID: string;\n  /** Secret token that this player should use to authenticate\n   * in future requests to this service * */\n  coveySessionToken: string;\n  /** Secret token that this player should use to authenticate\n   * in future requests to the video service * */\n  providerVideoToken: string;\n  /** List of players currently in this town * */\n  currentPlayers: Player[];\n  /** Friendly name of this town * */\n  friendlyName: string;\n  /** Is this a private town? * */\n  isPubliclyListed: boolean;\n  /** Conversation areas currently active in this town */\n  conversationAreas: ServerConversationArea[];\n}\n\n/**\n * Payload sent by client to create a Town in Covey.Town\n */\nexport interface TownCreateRequest {\n  friendlyName: string;\n  isPubliclyListed: boolean;\n}\n\n/**\n * Response from the server for a Town create request\n */\nexport interface TownCreateResponse {\n  coveyTownID: string;\n  coveyTownPassword: string;\n}\n\n/**\n * Response from the server for a Town list request\n */\nexport interface TownListResponse {\n  towns: CoveyTownList;\n}\n\n/**\n * Payload sent by the client to delete a Town\n */\nexport interface TownDeleteRequest {\n  coveyTownID: string;\n  coveyTownPassword: string;\n}\n\n/**\n * Payload sent by the client to update a Town.\n * N.B., JavaScript is terrible, so:\n * if(!isPubliclyListed) -> evaluates to true if the value is false OR undefined, use ===\n */\nexport interface TownUpdateRequest {\n  coveyTownID: string;\n  coveyTownPassword: string;\n  friendlyName?: string;\n  isPubliclyListed?: boolean;\n}\n\n/**\n * Envelope that wraps any response from the server\n */\nexport interface ResponseEnvelope<T> {\n  isOK: boolean;\n  message?: string;\n  response?: T;\n}\n\n/**\n * A handler to process a player's request to join a town. The flow is:\n *  1. Client makes a TownJoinRequest, this handler is executed\n *  2. Client uses the sessionToken returned by this handler to make a subscription to the town,\n *  @see townSubscriptionHandler for the code that handles that request.\n *\n * @param requestData an object representing the player's request\n */\nexport async function townJoinHandler(requestData: TownJoinRequest): Promise<ResponseEnvelope<TownJoinResponse>> {\n  const townsStore = CoveyTownsStore.getInstance();\n\n  const coveyTownController = townsStore.getControllerForTown(requestData.coveyTownID);\n  if (!coveyTownController) {\n    return {\n      isOK: false,\n      message: 'Error: No such town',\n    };\n  }\n  const newPlayer = new Player(requestData.userName);\n  const newSession = await coveyTownController.addPlayer(newPlayer);\n  assert(newSession.videoToken);\n  return {\n    isOK: true,\n    response: {\n      coveyUserID: newPlayer.id,\n      coveySessionToken: newSession.sessionToken,\n      providerVideoToken: newSession.videoToken,\n      currentPlayers: coveyTownController.players,\n      friendlyName: coveyTownController.friendlyName,\n      isPubliclyListed: coveyTownController.isPubliclyListed,\n      conversationAreas: coveyTownController.conversationAreas,\n    },\n  };\n}\n\nexport function townListHandler(): ResponseEnvelope<TownListResponse> {\n  const townsStore = CoveyTownsStore.getInstance();\n  return {\n    isOK: true,\n    response: { towns: townsStore.getTowns() },\n  };\n}\n\nexport function townCreateHandler(requestData: TownCreateRequest): ResponseEnvelope<TownCreateResponse> {\n  const townsStore = CoveyTownsStore.getInstance();\n  if (requestData.friendlyName.length === 0) {\n    return {\n      isOK: false,\n      message: 'FriendlyName must be specified',\n    };\n  }\n  const newTown = townsStore.createTown(requestData.friendlyName, requestData.isPubliclyListed);\n  return {\n    isOK: true,\n    response: {\n      coveyTownID: newTown.coveyTownID,\n      coveyTownPassword: newTown.townUpdatePassword,\n    },\n  };\n}\n\nexport function townDeleteHandler(requestData: TownDeleteRequest): ResponseEnvelope<Record<string, null>> {\n  const townsStore = CoveyTownsStore.getInstance();\n  const success = townsStore.deleteTown(requestData.coveyTownID, requestData.coveyTownPassword);\n  return {\n    isOK: success,\n    response: {},\n    message: !success ? 'Invalid password. Please double check your town update password.' : undefined,\n  };\n}\n\nexport function townUpdateHandler(requestData: TownUpdateRequest): ResponseEnvelope<Record<string, null>> {\n  const townsStore = CoveyTownsStore.getInstance();\n  const success = townsStore.updateTown(requestData.coveyTownID, requestData.coveyTownPassword, requestData.friendlyName, requestData.isPubliclyListed);\n  return {\n    isOK: success,\n    response: {},\n    message: !success ? 'Invalid password or update values specified. Please double check your town update password.' : undefined,\n  };\n\n}\n\n/**\n * A handler to process the \"Create Conversation Area\" request\n * The intended flow of this handler is:\n * * Fetch the town controller for the specified town ID\n * * Validate that the sessionToken is valid for that town\n * * Ask the TownController to create the conversation area\n * @param _requestData Conversation area create request\n */\nexport function conversationAreaCreateHandler(_requestData: ConversationAreaCreateRequest) : ResponseEnvelope<Record<string, null>> {\n  const townsStore = CoveyTownsStore.getInstance();\n  const townController = townsStore.getControllerForTown(_requestData.coveyTownID);\n  if (!townController?.getSessionByToken(_requestData.sessionToken)){\n    return {\n      isOK: false, response: {}, message: `Unable to create conversation area ${_requestData.conversationArea.label} with topic ${_requestData.conversationArea.topic}`,\n    };\n  }\n  const success = townController.addConversationArea(_requestData.conversationArea);\n\n  return {\n    isOK: success,\n    response: {},\n    message: !success ? `Unable to create conversation area ${_requestData.conversationArea.label} with topic ${_requestData.conversationArea.topic}` : undefined,\n  };\n}\n\n/**\n * An adapter between CoveyTownController's event interface (CoveyTownListener)\n * and the low-level network communication protocol\n *\n * @param socket the Socket object that we will use to communicate with the player\n */\nfunction townSocketAdapter(socket: Socket): CoveyTownListener {\n  return {\n    onPlayerMoved(movedPlayer: Player) {\n      socket.emit('playerMoved', movedPlayer);\n    },\n    onPlayerDisconnected(removedPlayer: Player) {\n      socket.emit('playerDisconnect', removedPlayer);\n    },\n    onPlayerJoined(newPlayer: Player) {\n      socket.emit('newPlayer', newPlayer);\n    },\n    onTownDestroyed() {\n      socket.emit('townClosing');\n      socket.disconnect(true);\n    },\n    onConversationAreaDestroyed(conversation: ServerConversationArea){\n      socket.emit('conversationDestroyed', conversation);\n    },\n    onConversationAreaUpdated(conversation: ServerConversationArea){\n      socket.emit('conversationUpdated', conversation);\n    },\n  };\n}\n\n/**\n * A handler to process a remote player's subscription to updates for a town\n *\n * @param socket the Socket object that we will use to communicate with the player\n */\nexport function townSubscriptionHandler(socket: Socket): void {\n  // Parse the client's session token from the connection\n  // For each player, the session token should be the same string returned by joinTownHandler\n  const { token, coveyTownID } = socket.handshake.auth as { token: string; coveyTownID: string };\n\n  const townController = CoveyTownsStore.getInstance()\n    .getControllerForTown(coveyTownID);\n\n  // Retrieve our metadata about this player from the TownController\n  const s = townController?.getSessionByToken(token);\n  if (!s || !townController) {\n    // No valid session exists for this token, hence this client's connection should be terminated\n    socket.disconnect(true);\n    return;\n  }\n\n  // Create an adapter that will translate events from the CoveyTownController into\n  // events that the socket protocol knows about\n  const listener = townSocketAdapter(socket);\n  townController.addTownListener(listener);\n\n  // Register an event listener for the client socket: if the client disconnects,\n  // clean up our listener adapter, and then let the CoveyTownController know that the\n  // player's session is disconnected\n  socket.on('disconnect', () => {\n    townController.removeTownListener(listener);\n    townController.destroySession(s);\n  });\n\n  // Register an event listener for the client socket: if the client updates their\n  // location, inform the CoveyTownController\n  socket.on('playerMovement', (movementData: UserLocation) => {\n    townController.updatePlayerLocation(s.player, movementData);\n  });\n}\n"},"/Users/carolinehughes/nu/cs4530/hw3-handout/src/router/towns.ts":{"language":"typescript","mutants":[{"id":"103","mutatorName":"BlockStatement","replacement":"{}","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":6,"line":126},"start":{"column":19,"line":120}}},{"id":"102","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"src/router/towns.ts(113,58): error TS2345: Argument of type '{}' is not assignable to parameter of type 'ConversationAreaCreateRequest'.\n  Type '{}' is missing the following properties from type 'ConversationAreaCreateRequest': coveyTownID, sessionToken, conversationArea\n","status":"CompileError","estimatedNetTime":560,"hitCount":1,"static":false,"coveredBy":["23"],"location":{"end":{"column":8,"line":117},"start":{"column":58,"line":113}}},{"id":"104","mutatorName":"ObjectLiteral","replacement":"{}","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":10,"line":125},"start":{"column":15,"line":123}}},{"id":"105","mutatorName":"StringLiteral","replacement":"\"\"","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":86,"line":124},"start":{"column":20,"line":124}}},{"id":"101","mutatorName":"BlockStatement","replacement":"{}","statusReason":": Timeout - Async callback was not invoked within the 5000 ms timeout specified by jest.setTimeout.Timeout - Async callback was not invoked within the 5000 ms timeout specified by jest.setTimeout.Error: \n    at new Spec (/Users/carolinehughes/nu/cs4530/hw3-handout/node_modules/jest-jasmine2/build/jasmine/Spec.js:116:22)\n    at new Spec (/Users/carolinehughes/nu/cs4530/hw3-handout/node_modules/jest-jasmine2/build/setup_jest_globals.js:78:9)\n    at specFactory (/Users/carolinehughes/nu/cs4530/hw3-handout/node_modules/jest-jasmine2/build/jasmine/Env.js:523:24)\n    at Env.it (/Users/carolinehughes/nu/cs4530/hw3-handout/node_modules/jest-jasmine2/build/jasmine/Env.js:592:24)\n    at Env.it (/Users/carolinehughes/nu/cs4530/hw3-handout/node_modules/jest-jasmine2/build/jasmineAsyncInstall.js:134:23)\n    at it (/Users/carolinehughes/nu/cs4530/hw3-handout/node_modules/jest-jasmine2/build/jasmine/jasmineLight.js:100:21)\n    at Suite.<anonymous> (/Users/carolinehughes/nu/cs4530/hw3-handout/.strykerTmp/sandbox4976062/src/client/CoveyTownConversationAPI.test.ts:60:3)\n    at addSpecsToSuite (/Users/carolinehughes/nu/cs4530/hw3-handout/node_modules/jest-jasmine2/build/jasmine/Env.js:444:51)\n    at Env.describe (/Users/carolinehughes/nu/cs4530/hw3-handout/node_modules/jest-jasmine2/build/jasmine/Env.js:414:11)\n    at describe (/Users/carolinehughes/nu/cs4530/hw3-handout/node_modules/jest-jasmine2/build/jasmine/jasmineLight.js:88:18)","status":"Killed","estimatedNetTime":560,"hitCount":1,"static":false,"testsCompleted":1,"killedBy":["23"],"coveredBy":["23"],"location":{"end":{"column":6,"line":120},"start":{"column":9,"line":112}}}],"source":"import express, { Express } from 'express';\nimport io from 'socket.io';\nimport { Server } from 'http';\nimport { StatusCodes } from 'http-status-codes';\nimport {\n  conversationAreaCreateHandler,\n  townCreateHandler, townDeleteHandler,\n  townJoinHandler,\n  townListHandler,\n  townSubscriptionHandler,\n  townUpdateHandler,\n} from '../requestHandlers/CoveyTownRequestHandlers';\nimport { logError } from '../Utils';\n\nexport default function addTownRoutes(http: Server, app: Express): io.Server {\n  /*\n   * Create a new session (aka join a town)\n   */\n  app.post('/sessions', express.json(), async (req, res) => {\n    try {\n      const result = await townJoinHandler({\n        userName: req.body.userName,\n        coveyTownID: req.body.coveyTownID,\n      });\n      res.status(StatusCodes.OK)\n        .json(result);\n    } catch (err) {\n      logError(err);\n      res.status(StatusCodes.INTERNAL_SERVER_ERROR)\n        .json({\n          message: 'Internal server error, please see log in server for more details',\n        });\n    }\n  });\n\n  /**\n   * Delete a town\n   */\n  app.delete('/towns/:townID/:townPassword', express.json(), async (req, res) => {\n    try {\n      const result = townDeleteHandler({\n        coveyTownID: req.params.townID,\n        coveyTownPassword: req.params.townPassword,\n      });\n      res.status(200)\n        .json(result);\n    } catch (err) {\n      logError(err);\n      res.status(500)\n        .json({\n          message: 'Internal server error, please see log in server for details',\n        });\n    }\n  });\n\n  /**\n   * List all towns\n   */\n  app.get('/towns', express.json(), async (_req, res) => {\n    try {\n      const result = townListHandler();\n      res.status(StatusCodes.OK)\n        .json(result);\n    } catch (err) {\n      logError(err);\n      res.status(StatusCodes.INTERNAL_SERVER_ERROR)\n        .json({\n          message: 'Internal server error, please see log in server for more details',\n        });\n    }\n  });\n\n  /**\n   * Create a town\n   */\n  app.post('/towns', express.json(), async (req, res) => {\n    try {\n      const result = townCreateHandler(req.body);\n      res.status(StatusCodes.OK)\n        .json(result);\n    } catch (err) {\n      logError(err);\n      res.status(StatusCodes.INTERNAL_SERVER_ERROR)\n        .json({\n          message: 'Internal server error, please see log in server for more details',\n        });\n    }\n  });\n  /**\n   * Update a town\n   */\n  app.patch('/towns/:townID', express.json(), async (req, res) => {\n    try {\n      const result = townUpdateHandler({\n        coveyTownID: req.params.townID,\n        isPubliclyListed: req.body.isPubliclyListed,\n        friendlyName: req.body.friendlyName,\n        coveyTownPassword: req.body.coveyTownPassword,\n      });\n      res.status(StatusCodes.OK)\n        .json(result);\n    } catch (err) {\n      logError(err);\n      res.status(StatusCodes.INTERNAL_SERVER_ERROR)\n        .json({\n          message: 'Internal server error, please see log in server for more details',\n        });\n    }\n  });\n\n  app.post('/towns/:townID/conversationAreas', express.json(), async (req, res) => {\n    try {\n      const result = await conversationAreaCreateHandler({\n        coveyTownID: req.params.townID,\n        sessionToken: req.body.sessionToken,\n        conversationArea: req.body.conversationArea,\n      });\n      res.status(StatusCodes.OK)\n        .json(result);\n    } catch (err) {\n      logError(err);\n      res.status(StatusCodes.INTERNAL_SERVER_ERROR)\n        .json({\n          message: 'Internal server error, please see log in server for more details',\n        });\n    }\n  });\n\n  const socketServer = new io.Server(http, { cors: { origin: '*' } });\n  socketServer.on('connection', townSubscriptionHandler);\n  return socketServer;\n}\n"},"/Users/carolinehughes/nu/cs4530/hw3-handout/src/types/Player.ts":{"language":"typescript","mutants":[{"id":"106","mutatorName":"BlockStatement","replacement":"{}","statusReason":"src/types/Player.ts(56,52): error TS2355: A function whose declared type is neither 'void' nor 'any' must return a value.\n","status":"CompileError","estimatedNetTime":560,"hitCount":1,"static":false,"coveredBy":["23"],"location":{"end":{"column":4,"line":63},"start":{"column":60,"line":56}}},{"id":"107","mutatorName":"ConditionalExpression","replacement":"true","status":"Survived","estimatedNetTime":560,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["23"],"location":{"end":{"column":89,"line":61},"start":{"column":7,"line":58}}},{"id":"108","mutatorName":"ConditionalExpression","replacement":"false","status":"Survived","estimatedNetTime":560,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["23"],"location":{"end":{"column":89,"line":61},"start":{"column":7,"line":58}}},{"id":"109","mutatorName":"LogicalOperator","replacement":"this.location.x > conversation.boundingBox.x - conversation.boundingBox.width / 2 && this.location.x < conversation.boundingBox.x + conversation.boundingBox.width / 2 && this.location.y > conversation.boundingBox.y - conversation.boundingBox.height / 2 || this.location.y < conversation.boundingBox.y + conversation.boundingBox.height / 2","status":"Survived","estimatedNetTime":560,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["23"],"location":{"end":{"column":89,"line":61},"start":{"column":7,"line":58}}},{"id":"110","mutatorName":"ConditionalExpression","replacement":"true","status":"Survived","estimatedNetTime":560,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["23"],"location":{"end":{"column":89,"line":60},"start":{"column":7,"line":58}}},{"id":"111","mutatorName":"LogicalOperator","replacement":"this.location.x > conversation.boundingBox.x - conversation.boundingBox.width / 2 && this.location.x < conversation.boundingBox.x + conversation.boundingBox.width / 2 || this.location.y > conversation.boundingBox.y - conversation.boundingBox.height / 2","status":"Survived","estimatedNetTime":560,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["23"],"location":{"end":{"column":89,"line":60},"start":{"column":7,"line":58}}},{"id":"112","mutatorName":"ConditionalExpression","replacement":"true","status":"Survived","estimatedNetTime":560,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["23"],"location":{"end":{"column":88,"line":59},"start":{"column":7,"line":58}}},{"id":"119","mutatorName":"ConditionalExpression","replacement":"true","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":88,"line":59},"start":{"column":7,"line":59}}},{"id":"113","mutatorName":"LogicalOperator","replacement":"this.location.x > conversation.boundingBox.x - conversation.boundingBox.width / 2 || this.location.x < conversation.boundingBox.x + conversation.boundingBox.width / 2","status":"Survived","estimatedNetTime":560,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["23"],"location":{"end":{"column":88,"line":59},"start":{"column":7,"line":58}}},{"id":"120","mutatorName":"EqualityOperator","replacement":"this.location.x <= conversation.boundingBox.x + conversation.boundingBox.width / 2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":88,"line":59},"start":{"column":7,"line":59}}},{"id":"114","mutatorName":"ConditionalExpression","replacement":"true","status":"Survived","estimatedNetTime":560,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["23"],"location":{"end":{"column":88,"line":58},"start":{"column":7,"line":58}}},{"id":"121","mutatorName":"EqualityOperator","replacement":"this.location.x >= conversation.boundingBox.x + conversation.boundingBox.width / 2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":88,"line":59},"start":{"column":7,"line":59}}},{"id":"116","mutatorName":"EqualityOperator","replacement":"this.location.x <= conversation.boundingBox.x - conversation.boundingBox.width / 2","status":"Survived","estimatedNetTime":560,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["23"],"location":{"end":{"column":88,"line":58},"start":{"column":7,"line":58}}},{"id":"115","mutatorName":"EqualityOperator","replacement":"this.location.x >= conversation.boundingBox.x - conversation.boundingBox.width / 2","status":"Survived","estimatedNetTime":560,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["23"],"location":{"end":{"column":88,"line":58},"start":{"column":7,"line":58}}},{"id":"122","mutatorName":"ArithmeticOperator","replacement":"conversation.boundingBox.x - conversation.boundingBox.width / 2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":88,"line":59},"start":{"column":25,"line":59}}},{"id":"123","mutatorName":"ArithmeticOperator","replacement":"conversation.boundingBox.width * 2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":88,"line":59},"start":{"column":54,"line":59}}},{"id":"117","mutatorName":"ArithmeticOperator","replacement":"conversation.boundingBox.x + conversation.boundingBox.width / 2","status":"Survived","estimatedNetTime":560,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["23"],"location":{"end":{"column":88,"line":58},"start":{"column":25,"line":58}}},{"id":"124","mutatorName":"ConditionalExpression","replacement":"true","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":89,"line":60},"start":{"column":7,"line":60}}},{"id":"125","mutatorName":"EqualityOperator","replacement":"this.location.y >= conversation.boundingBox.y - conversation.boundingBox.height / 2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":89,"line":60},"start":{"column":7,"line":60}}},{"id":"118","mutatorName":"ArithmeticOperator","replacement":"conversation.boundingBox.width * 2","status":"Survived","estimatedNetTime":560,"hitCount":1,"static":false,"testsCompleted":1,"coveredBy":["23"],"location":{"end":{"column":88,"line":58},"start":{"column":54,"line":58}}},{"id":"126","mutatorName":"EqualityOperator","replacement":"this.location.y <= conversation.boundingBox.y - conversation.boundingBox.height / 2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":89,"line":60},"start":{"column":7,"line":60}}},{"id":"127","mutatorName":"ArithmeticOperator","replacement":"conversation.boundingBox.y + conversation.boundingBox.height / 2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":89,"line":60},"start":{"column":25,"line":60}}},{"id":"128","mutatorName":"ArithmeticOperator","replacement":"conversation.boundingBox.height * 2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":89,"line":60},"start":{"column":54,"line":60}}},{"id":"129","mutatorName":"ConditionalExpression","replacement":"true","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":89,"line":61},"start":{"column":7,"line":61}}},{"id":"130","mutatorName":"EqualityOperator","replacement":"this.location.y <= conversation.boundingBox.y + conversation.boundingBox.height / 2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":89,"line":61},"start":{"column":7,"line":61}}},{"id":"131","mutatorName":"EqualityOperator","replacement":"this.location.y >= conversation.boundingBox.y + conversation.boundingBox.height / 2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":89,"line":61},"start":{"column":7,"line":61}}},{"id":"132","mutatorName":"ArithmeticOperator","replacement":"conversation.boundingBox.y - conversation.boundingBox.height / 2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":89,"line":61},"start":{"column":25,"line":61}}},{"id":"133","mutatorName":"ArithmeticOperator","replacement":"conversation.boundingBox.height * 2","status":"NoCoverage","estimatedNetTime":0,"static":false,"coveredBy":[],"location":{"end":{"column":89,"line":61},"start":{"column":54,"line":61}}}],"source":"import { nanoid } from 'nanoid';\nimport { ServerConversationArea } from '../client/TownsServiceClient';\nimport { UserLocation } from '../CoveyTypes';\n\n/**\n * Each user who is connected to a town is represented by a Player object\n */\nexport default class Player {\n  /** The current location of this user in the world map * */\n  public location: UserLocation;\n\n  /** The unique identifier for this player * */\n  private readonly _id: string;\n\n  /** The player's username, which is not guaranteed to be unique within the town * */\n  private readonly _userName: string;\n\n  /** The current ConversationArea that the player is in, or undefined if they are not located within one */\n  private _activeConversationArea?: ServerConversationArea;\n\n  constructor(userName: string) {\n    this.location = {\n      x: 0,\n      y: 0,\n      moving: false,\n      rotation: 'front',\n    };\n    this._userName = userName;\n    this._id = nanoid();\n  }\n\n  get userName(): string {\n    return this._userName;\n  }\n\n  get id(): string {\n    return this._id;\n  }\n\n  get activeConversationArea(): ServerConversationArea | undefined {\n    return this._activeConversationArea;\n  }\n\n  set activeConversationArea(conversationArea: ServerConversationArea | undefined) {\n    this._activeConversationArea = conversationArea;\n  }\n\n  /**\n   * Checks to see if a player's location is within the specified conversation area\n   * \n   * This method is resilient to floating point errors that could arise if any of the coordinates of\n   * `this.location` are dramatically smaller than those of the conversation area's bounding box.\n   * @param conversation \n   * @returns \n   */\n  isWithin(conversation: ServerConversationArea) : boolean {\n    return (\n      this.location.x > conversation.boundingBox.x - conversation.boundingBox.width / 2 &&\n      this.location.x < conversation.boundingBox.x + conversation.boundingBox.width / 2 &&\n      this.location.y > conversation.boundingBox.y - conversation.boundingBox.height / 2 &&\n      this.location.y < conversation.boundingBox.y + conversation.boundingBox.height / 2\n    );\n  }\n\n}\n"}},"schemaVersion":"1.0","thresholds":{"high":80,"low":60,"break":null},"testFiles":{"/Users/carolinehughes/nu/cs4530/hw3-handout/src/lib/CoveyTownController.test.ts":{"tests":[{"id":"0","name":"CoveyTownController constructor should set the friendlyName property","location":{"start":{"column":3,"line":30}}},{"id":"1","name":"CoveyTownController addPlayer should use the coveyTownID and player ID properties when requesting a video token","location":{"start":{"column":5,"line":36}}},{"id":"2","name":"CoveyTownController town listeners and events should notify added listeners of player movement when updatePlayerLocation is called","location":{"start":{"column":5,"line":59}}},{"id":"3","name":"CoveyTownController town listeners and events should notify added listeners of player disconnections when destroySession is called","location":{"start":{"column":5,"line":67}}},{"id":"4","name":"CoveyTownController town listeners and events should notify added listeners of new players when addPlayer is called","location":{"start":{"column":5,"line":77}}},{"id":"5","name":"CoveyTownController town listeners and events should notify added listeners that the town is destroyed when disconnectAllPlayers is called","location":{"start":{"column":5,"line":84}}},{"id":"6","name":"CoveyTownController town listeners and events should not notify removed listeners of player movement when updatePlayerLocation is called","location":{"start":{"column":5,"line":92}}},{"id":"7","name":"CoveyTownController town listeners and events should not notify removed listeners of player disconnections when destroySession is called","location":{"start":{"column":5,"line":103}}},{"id":"8","name":"CoveyTownController town listeners and events should not notify removed listeners of new players when addPlayer is called","location":{"start":{"column":5,"line":113}}},{"id":"9","name":"CoveyTownController town listeners and events should not notify removed listeners that the town is destroyed when disconnectAllPlayers is called","location":{"start":{"column":5,"line":124}}},{"id":"10","name":"CoveyTownController townSubscriptionHandler should reject connections with invalid town IDs by calling disconnect","location":{"start":{"column":5,"line":147}}},{"id":"11","name":"CoveyTownController townSubscriptionHandler should reject connections with invalid session tokens by calling disconnect","location":{"start":{"column":5,"line":152}}},{"id":"12","name":"CoveyTownController townSubscriptionHandler with a valid session token should add a town listener, which should emit \"newPlayer\" to the socket when a player joins","location":{"start":{"column":7,"line":158}}},{"id":"13","name":"CoveyTownController townSubscriptionHandler with a valid session token should add a town listener, which should emit \"playerMoved\" to the socket when a player moves","location":{"start":{"column":7,"line":168}}},{"id":"14","name":"CoveyTownController townSubscriptionHandler with a valid session token should add a town listener, which should emit \"playerDisconnect\" to the socket when a player disconnects","location":{"start":{"column":7,"line":178}}},{"id":"15","name":"CoveyTownController townSubscriptionHandler with a valid session token should add a town listener, which should emit \"townClosing\" to the socket and disconnect it when disconnectAllPlayers is called","location":{"start":{"column":7,"line":188}}},{"id":"16","name":"CoveyTownController townSubscriptionHandler with a valid session token when a socket disconnect event is fired should remove the town listener for that socket, and stop sending events to it","location":{"start":{"column":9,"line":200}}},{"id":"17","name":"CoveyTownController townSubscriptionHandler with a valid session token when a socket disconnect event is fired should destroy the session corresponding to that socket","location":{"start":{"column":9,"line":219}}},{"id":"18","name":"CoveyTownController townSubscriptionHandler with a valid session token should forward playerMovement events from the socket to subscribed listeners","location":{"start":{"column":7,"line":244}}},{"id":"19","name":"CoveyTownController addConversationArea should add the conversation area to the list of conversation areas","location":{"start":{"column":5,"line":274}}},{"id":"20","name":"CoveyTownController updatePlayerLocation should respect the conversation area reported by the player userLocation.conversationLabel, and not override it based on the player's x,y location","location":{"start":{"column":5,"line":291}}},{"id":"21","name":"CoveyTownController updatePlayerLocation should emit an onConversationUpdated event when a conversation area gets a new occupant","location":{"start":{"column":5,"line":316}}},{"id":"22","name":"CoveyTownController updatePlayerLocation should remove a player from conversation when their session is destroyed","location":{"start":{"column":5,"line":339}}}],"source":"import { nanoid } from 'nanoid';\nimport { mock, mockDeep, mockReset } from 'jest-mock-extended';\nimport { Socket } from 'socket.io';\nimport TwilioVideo from './TwilioVideo';\nimport Player from '../types/Player';\nimport CoveyTownController from './CoveyTownController';\nimport CoveyTownListener from '../types/CoveyTownListener';\nimport { UserLocation } from '../CoveyTypes';\nimport PlayerSession from '../types/PlayerSession';\nimport { townSubscriptionHandler } from '../requestHandlers/CoveyTownRequestHandlers';\nimport CoveyTownsStore from './CoveyTownsStore';\nimport * as TestUtils from '../client/TestUtils';\n\nconst mockTwilioVideo = mockDeep<TwilioVideo>();\njest.spyOn(TwilioVideo, 'getInstance').mockReturnValue(mockTwilioVideo);\n\nfunction generateTestLocation(): UserLocation {\n  return {\n    rotation: 'back',\n    moving: Math.random() < 0.5,\n    x: Math.floor(Math.random() * 100),\n    y: Math.floor(Math.random() * 100),\n  };\n}\n\ndescribe('CoveyTownController', () => {\n  beforeEach(() => {\n    mockTwilioVideo.getTokenForTown.mockClear();\n  });\n  it('constructor should set the friendlyName property', () => {\n    const townName = `FriendlyNameTest-${nanoid()}`;\n    const townController = new CoveyTownController(townName, false);\n    expect(townController.friendlyName).toBe(townName);\n  });\n  describe('addPlayer', () => {\n    it('should use the coveyTownID and player ID properties when requesting a video token', async () => {\n      const townName = `FriendlyNameTest-${nanoid()}`;\n      const townController = new CoveyTownController(townName, false);\n      const newPlayerSession = await townController.addPlayer(new Player(nanoid()));\n      expect(mockTwilioVideo.getTokenForTown).toBeCalledTimes(1);\n      expect(mockTwilioVideo.getTokenForTown).toBeCalledWith(\n        townController.coveyTownID,\n        newPlayerSession.player.id,\n      );\n    });\n  });\n  describe('town listeners and events', () => {\n    let testingTown: CoveyTownController;\n    const mockListeners = [\n      mock<CoveyTownListener>(),\n      mock<CoveyTownListener>(),\n      mock<CoveyTownListener>(),\n    ];\n    beforeEach(() => {\n      const townName = `town listeners and events tests ${nanoid()}`;\n      testingTown = new CoveyTownController(townName, false);\n      mockListeners.forEach(mockReset);\n    });\n    it('should notify added listeners of player movement when updatePlayerLocation is called', async () => {\n      const player = new Player('test player');\n      await testingTown.addPlayer(player);\n      const newLocation = generateTestLocation();\n      mockListeners.forEach(listener => testingTown.addTownListener(listener));\n      testingTown.updatePlayerLocation(player, newLocation);\n      mockListeners.forEach(listener => expect(listener.onPlayerMoved).toBeCalledWith(player));\n    });\n    it('should notify added listeners of player disconnections when destroySession is called', async () => {\n      const player = new Player('test player');\n      const session = await testingTown.addPlayer(player);\n\n      mockListeners.forEach(listener => testingTown.addTownListener(listener));\n      testingTown.destroySession(session);\n      mockListeners.forEach(listener =>\n        expect(listener.onPlayerDisconnected).toBeCalledWith(player),\n      );\n    });\n    it('should notify added listeners of new players when addPlayer is called', async () => {\n      mockListeners.forEach(listener => testingTown.addTownListener(listener));\n\n      const player = new Player('test player');\n      await testingTown.addPlayer(player);\n      mockListeners.forEach(listener => expect(listener.onPlayerJoined).toBeCalledWith(player));\n    });\n    it('should notify added listeners that the town is destroyed when disconnectAllPlayers is called', async () => {\n      const player = new Player('test player');\n      await testingTown.addPlayer(player);\n\n      mockListeners.forEach(listener => testingTown.addTownListener(listener));\n      testingTown.disconnectAllPlayers();\n      mockListeners.forEach(listener => expect(listener.onTownDestroyed).toBeCalled());\n    });\n    it('should not notify removed listeners of player movement when updatePlayerLocation is called', async () => {\n      const player = new Player('test player');\n      await testingTown.addPlayer(player);\n\n      mockListeners.forEach(listener => testingTown.addTownListener(listener));\n      const newLocation = generateTestLocation();\n      const listenerRemoved = mockListeners[1];\n      testingTown.removeTownListener(listenerRemoved);\n      testingTown.updatePlayerLocation(player, newLocation);\n      expect(listenerRemoved.onPlayerMoved).not.toBeCalled();\n    });\n    it('should not notify removed listeners of player disconnections when destroySession is called', async () => {\n      const player = new Player('test player');\n      const session = await testingTown.addPlayer(player);\n\n      mockListeners.forEach(listener => testingTown.addTownListener(listener));\n      const listenerRemoved = mockListeners[1];\n      testingTown.removeTownListener(listenerRemoved);\n      testingTown.destroySession(session);\n      expect(listenerRemoved.onPlayerDisconnected).not.toBeCalled();\n    });\n    it('should not notify removed listeners of new players when addPlayer is called', async () => {\n      const player = new Player('test player');\n\n      mockListeners.forEach(listener => testingTown.addTownListener(listener));\n      const listenerRemoved = mockListeners[1];\n      testingTown.removeTownListener(listenerRemoved);\n      const session = await testingTown.addPlayer(player);\n      testingTown.destroySession(session);\n      expect(listenerRemoved.onPlayerJoined).not.toBeCalled();\n    });\n\n    it('should not notify removed listeners that the town is destroyed when disconnectAllPlayers is called', async () => {\n      const player = new Player('test player');\n      await testingTown.addPlayer(player);\n\n      mockListeners.forEach(listener => testingTown.addTownListener(listener));\n      const listenerRemoved = mockListeners[1];\n      testingTown.removeTownListener(listenerRemoved);\n      testingTown.disconnectAllPlayers();\n      expect(listenerRemoved.onTownDestroyed).not.toBeCalled();\n    });\n  });\n  describe('townSubscriptionHandler', () => {\n    const mockSocket = mock<Socket>();\n    let testingTown: CoveyTownController;\n    let player: Player;\n    let session: PlayerSession;\n    beforeEach(async () => {\n      const townName = `connectPlayerSocket tests ${nanoid()}`;\n      testingTown = CoveyTownsStore.getInstance().createTown(townName, false);\n      mockReset(mockSocket);\n      player = new Player('test player');\n      session = await testingTown.addPlayer(player);\n    });\n    it('should reject connections with invalid town IDs by calling disconnect', async () => {\n      TestUtils.setSessionTokenAndTownID(nanoid(), session.sessionToken, mockSocket);\n      townSubscriptionHandler(mockSocket);\n      expect(mockSocket.disconnect).toBeCalledWith(true);\n    });\n    it('should reject connections with invalid session tokens by calling disconnect', async () => {\n      TestUtils.setSessionTokenAndTownID(testingTown.coveyTownID, nanoid(), mockSocket);\n      townSubscriptionHandler(mockSocket);\n      expect(mockSocket.disconnect).toBeCalledWith(true);\n    });\n    describe('with a valid session token', () => {\n      it('should add a town listener, which should emit \"newPlayer\" to the socket when a player joins', async () => {\n        TestUtils.setSessionTokenAndTownID(\n          testingTown.coveyTownID,\n          session.sessionToken,\n          mockSocket,\n        );\n        townSubscriptionHandler(mockSocket);\n        await testingTown.addPlayer(player);\n        expect(mockSocket.emit).toBeCalledWith('newPlayer', player);\n      });\n      it('should add a town listener, which should emit \"playerMoved\" to the socket when a player moves', async () => {\n        TestUtils.setSessionTokenAndTownID(\n          testingTown.coveyTownID,\n          session.sessionToken,\n          mockSocket,\n        );\n        townSubscriptionHandler(mockSocket);\n        testingTown.updatePlayerLocation(player, generateTestLocation());\n        expect(mockSocket.emit).toBeCalledWith('playerMoved', player);\n      });\n      it('should add a town listener, which should emit \"playerDisconnect\" to the socket when a player disconnects', async () => {\n        TestUtils.setSessionTokenAndTownID(\n          testingTown.coveyTownID,\n          session.sessionToken,\n          mockSocket,\n        );\n        townSubscriptionHandler(mockSocket);\n        testingTown.destroySession(session);\n        expect(mockSocket.emit).toBeCalledWith('playerDisconnect', player);\n      });\n      it('should add a town listener, which should emit \"townClosing\" to the socket and disconnect it when disconnectAllPlayers is called', async () => {\n        TestUtils.setSessionTokenAndTownID(\n          testingTown.coveyTownID,\n          session.sessionToken,\n          mockSocket,\n        );\n        townSubscriptionHandler(mockSocket);\n        testingTown.disconnectAllPlayers();\n        expect(mockSocket.emit).toBeCalledWith('townClosing');\n        expect(mockSocket.disconnect).toBeCalledWith(true);\n      });\n      describe('when a socket disconnect event is fired', () => {\n        it('should remove the town listener for that socket, and stop sending events to it', async () => {\n          TestUtils.setSessionTokenAndTownID(\n            testingTown.coveyTownID,\n            session.sessionToken,\n            mockSocket,\n          );\n          townSubscriptionHandler(mockSocket);\n\n          // find the 'disconnect' event handler for the socket, which should have been registered after the socket was connected\n          const disconnectHandler = mockSocket.on.mock.calls.find(call => call[0] === 'disconnect');\n          if (disconnectHandler && disconnectHandler[1]) {\n            disconnectHandler[1]();\n            const newPlayer = new Player('should not be notified');\n            await testingTown.addPlayer(newPlayer);\n            expect(mockSocket.emit).not.toHaveBeenCalledWith('newPlayer', newPlayer);\n          } else {\n            fail('No disconnect handler registered');\n          }\n        });\n        it('should destroy the session corresponding to that socket', async () => {\n          TestUtils.setSessionTokenAndTownID(\n            testingTown.coveyTownID,\n            session.sessionToken,\n            mockSocket,\n          );\n          townSubscriptionHandler(mockSocket);\n\n          // find the 'disconnect' event handler for the socket, which should have been registered after the socket was connected\n          const disconnectHandler = mockSocket.on.mock.calls.find(call => call[0] === 'disconnect');\n          if (disconnectHandler && disconnectHandler[1]) {\n            disconnectHandler[1]();\n            mockReset(mockSocket);\n            TestUtils.setSessionTokenAndTownID(\n              testingTown.coveyTownID,\n              session.sessionToken,\n              mockSocket,\n            );\n            townSubscriptionHandler(mockSocket);\n            expect(mockSocket.disconnect).toHaveBeenCalledWith(true);\n          } else {\n            fail('No disconnect handler registered');\n          }\n        });\n      });\n      it('should forward playerMovement events from the socket to subscribed listeners', async () => {\n        TestUtils.setSessionTokenAndTownID(\n          testingTown.coveyTownID,\n          session.sessionToken,\n          mockSocket,\n        );\n        townSubscriptionHandler(mockSocket);\n        const mockListener = mock<CoveyTownListener>();\n        testingTown.addTownListener(mockListener);\n        // find the 'playerMovement' event handler for the socket, which should have been registered after the socket was connected\n        const playerMovementHandler = mockSocket.on.mock.calls.find(\n          call => call[0] === 'playerMovement',\n        );\n        if (playerMovementHandler && playerMovementHandler[1]) {\n          const newLocation = generateTestLocation();\n          player.location = newLocation;\n          playerMovementHandler[1](newLocation);\n          expect(mockListener.onPlayerMoved).toHaveBeenCalledWith(player);\n        } else {\n          fail('No playerMovement handler registered');\n        }\n      });\n    });\n  });\n  describe('addConversationArea', () => {\n    let testingTown: CoveyTownController;\n    beforeEach(() => {\n      const townName = `addConversationArea test town ${nanoid()}`;\n      testingTown = new CoveyTownController(townName, false);\n    });\n    it('should add the conversation area to the list of conversation areas', () => {\n      const newConversationArea = TestUtils.createConversationForTesting();\n      const result = testingTown.addConversationArea(newConversationArea);\n      expect(result).toBe(true);\n      const areas = testingTown.conversationAreas;\n      expect(areas.length).toEqual(1);\n      expect(areas[0].label).toEqual(newConversationArea.label);\n      expect(areas[0].topic).toEqual(newConversationArea.topic);\n      expect(areas[0].boundingBox).toEqual(newConversationArea.boundingBox);\n    });\n  });\n  describe('updatePlayerLocation', () => {\n    let testingTown: CoveyTownController;\n    beforeEach(() => {\n      const townName = `updatePlayerLocation test town ${nanoid()}`;\n      testingTown = new CoveyTownController(townName, false);\n    });\n    it(\"should respect the conversation area reported by the player userLocation.conversationLabel, and not override it based on the player's x,y location\", async () => {\n      const newConversationArea = TestUtils.createConversationForTesting({\n        boundingBox: { x: 10, y: 10, height: 5, width: 5 },\n      });\n      const result = testingTown.addConversationArea(newConversationArea);\n      expect(result).toBe(true);\n      const player = new Player(nanoid());\n      await testingTown.addPlayer(player);\n\n      const newLocation: UserLocation = {\n        moving: false,\n        rotation: 'front',\n        x: 25,\n        y: 25,\n        conversationLabel: newConversationArea.label,\n      };\n      testingTown.updatePlayerLocation(player, newLocation);\n      expect(player.activeConversationArea?.label).toEqual(newConversationArea.label);\n      expect(player.activeConversationArea?.topic).toEqual(newConversationArea.topic);\n      expect(player.activeConversationArea?.boundingBox).toEqual(newConversationArea.boundingBox);\n\n      const areas = testingTown.conversationAreas;\n      expect(areas[0].occupantsByID.length).toBe(1);\n      expect(areas[0].occupantsByID[0]).toBe(player.id);\n    });\n    it('should emit an onConversationUpdated event when a conversation area gets a new occupant', async () => {\n      const newConversationArea = TestUtils.createConversationForTesting({\n        boundingBox: { x: 10, y: 10, height: 5, width: 5 },\n      });\n      const result = testingTown.addConversationArea(newConversationArea);\n      expect(result).toBe(true);\n\n      const mockListener = mock<CoveyTownListener>();\n      testingTown.addTownListener(mockListener);\n\n      const player = new Player(nanoid());\n      await testingTown.addPlayer(player);\n      const newLocation: UserLocation = {\n        moving: false,\n        rotation: 'front',\n        x: 25,\n        y: 25,\n        conversationLabel: newConversationArea.label,\n      };\n      testingTown.updatePlayerLocation(player, newLocation);\n      expect(mockListener.onConversationAreaUpdated).toHaveBeenCalledTimes(1);\n    });\n\n    it('should remove a player from conversation when their session is destroyed', async () => {\n      const newConversationArea = TestUtils.createConversationForTesting({\n        boundingBox: { x: 10, y: 10, height: 5, width: 5 },\n      });\n      const result = testingTown.addConversationArea(newConversationArea);\n      expect(result).toBe(true);\n\n      const player = new Player(nanoid());\n      const session = await testingTown.addPlayer(player);\n\n      const newLocation: UserLocation = {\n        moving: false,\n        rotation: 'front',\n        x: 25,\n        y: 25,\n        conversationLabel: newConversationArea.label,\n      };\n      testingTown.updatePlayerLocation(player, newLocation);\n\n      // there is now 1 person in the CA\n      expect(newConversationArea.occupantsByID.length).toEqual(1);\n\n      // destroy the session\n      testingTown.destroySession(session);\n\n      // after the player's session is destroyed there are zero occupants\n      expect(newConversationArea.occupantsByID.length).toEqual(0);\n    });\n  });\n});\n"},"/Users/carolinehughes/nu/cs4530/hw3-handout/src/client/CoveyTownConversationAPI.test.ts":{"tests":[{"id":"23","name":"Create Conversation Area API Executes without error when creating a new conversation","location":{"start":{"column":3,"line":59}}},{"id":"24","name":"conversationAreaCreateHandler Checks for a valid session token before creating a conversation area","location":{"start":{"column":3,"line":86}}}],"source":"import CORS from 'cors';\nimport Express from 'express';\nimport http from 'http';\nimport { nanoid } from 'nanoid';\nimport { AddressInfo } from 'net';\nimport { mock, mockReset } from 'jest-mock-extended';\nimport CoveyTownController from '../lib/CoveyTownController';\nimport CoveyTownsStore from '../lib/CoveyTownsStore';\nimport addTownRoutes from '../router/towns';\nimport * as requestHandlers from '../requestHandlers/CoveyTownRequestHandlers';\nimport { createConversationForTesting } from './TestUtils';\nimport TownsServiceClient, { ServerConversationArea } from './TownsServiceClient';\n\ntype TestTownData = {\n  friendlyName: string;\n  coveyTownID: string;\n  isPubliclyListed: boolean;\n  townUpdatePassword: string;\n};\n\ndescribe('Create Conversation Area API', () => {\n  let server: http.Server;\n  let apiClient: TownsServiceClient;\n\n  async function createTownForTesting(\n    friendlyNameToUse?: string,\n    isPublic = false,\n  ): Promise<TestTownData> {\n    const friendlyName =\n      friendlyNameToUse !== undefined\n        ? friendlyNameToUse\n        : `${isPublic ? 'Public' : 'Private'}TestingTown=${nanoid()}`;\n    const ret = await apiClient.createTown({\n      friendlyName,\n      isPubliclyListed: isPublic,\n    });\n    return {\n      friendlyName,\n      isPubliclyListed: isPublic,\n      coveyTownID: ret.coveyTownID,\n      townUpdatePassword: ret.coveyTownPassword,\n    };\n  }\n\n  beforeAll(async () => {\n    const app = Express();\n    app.use(CORS());\n    server = http.createServer(app);\n\n    addTownRoutes(server, app);\n    await server.listen();\n    const address = server.address() as AddressInfo;\n\n    apiClient = new TownsServiceClient(`http://127.0.0.1:${address.port}`);\n  });\n  afterAll(async () => {\n    await server.close();\n  });\n  it('Executes without error when creating a new conversation', async () => {\n    const testingTown = await createTownForTesting(undefined, true);\n    const testingSession = await apiClient.joinTown({\n      userName: nanoid(),\n      coveyTownID: testingTown.coveyTownID,\n    });\n    await apiClient.createConversationArea({\n      conversationArea: createConversationForTesting(),\n      coveyTownID: testingTown.coveyTownID,\n      sessionToken: testingSession.coveySessionToken,\n    });\n  });\n});\ndescribe('conversationAreaCreateHandler', () => {\n\n  const mockCoveyTownStore = mock<CoveyTownsStore>();\n  const mockCoveyTownController = mock<CoveyTownController>();\n  beforeAll(() => {\n    // Set up a spy for CoveyTownsStore that will always return our mockCoveyTownsStore as the singleton instance\n    jest.spyOn(CoveyTownsStore, 'getInstance').mockReturnValue(mockCoveyTownStore);\n  });\n  beforeEach(() => {\n    // Reset all mock calls, and ensure that getControllerForTown will always return the same mock controller\n    mockReset(mockCoveyTownController);\n    mockReset(mockCoveyTownStore);\n    mockCoveyTownStore.getControllerForTown.mockReturnValue(mockCoveyTownController);\n  });\n  it('Checks for a valid session token before creating a conversation area', ()=>{\n    const coveyTownID = nanoid();\n    const conversationArea :ServerConversationArea = { boundingBox: { height: 1, width: 1, x:1, y:1 }, label: nanoid(), occupantsByID: [], topic: nanoid() };\n    const invalidSessionToken = nanoid();\n\n    // Make sure to return 'undefined' regardless of what session token is passed\n    mockCoveyTownController.getSessionByToken.mockReturnValueOnce(undefined);\n\n    requestHandlers.conversationAreaCreateHandler({\n      conversationArea,\n      coveyTownID,\n      sessionToken: invalidSessionToken,\n    });\n    expect(mockCoveyTownController.getSessionByToken).toBeCalledWith(invalidSessionToken);\n    expect(mockCoveyTownController.addConversationArea).not.toHaveBeenCalled();\n  });\n});"}},"projectRoot":"/Users/carolinehughes/nu/cs4530/hw3-handout","config":{"$schema":"./node_modules/@stryker-mutator/core/schema/stryker-schema.json","_comment":"This config was generated using 'stryker init'. Please take a look at: https://stryker-mutator.io/docs/stryker-js/configuration/ for more information","packageManager":"npm","reporters":["html","clear-text","json","progress"],"tempDirName":".strykerTmp","checkers":["typescript"],"tsconfigFile":"tsconfig.json","testRunner":"jest","coverageAnalysis":"perTest","timeoutFactor":5,"timeoutMS":15000,"mutate":["src/lib/CoveyTownController.ts:123-126","src/lib/CoveyTownController.ts:140-156","src/lib/CoveyTownController.ts:168-175","src/lib/CoveyTownController.ts:191-210","src/lib/CoveyTownController.ts:219-225","src/types/Player.ts:56-65","src/requestHandlers/CoveyTownRequestHandlers.ts:184-199","src/router/towns.ts:112-127"],"allowConsoleColors":true,"checkerNodeArgs":[],"maxTestRunnerReuse":0,"commandRunner":{"command":"npm test"},"clearTextReporter":{"allowColor":true,"logTests":true,"maxTestsToLog":3},"dashboard":{"baseUrl":"https://dashboard.stryker-mutator.io/api/reports","reportType":"full"},"eventReporter":{"baseDir":"reports/mutation/events"},"ignorePatterns":[],"fileLogLevel":"off","inPlace":false,"logLevel":"info","maxConcurrentTestRunners":9007199254740991,"mutator":{"plugins":null,"excludedMutations":[]},"plugins":["@stryker-mutator/*","/Users/carolinehughes/nu/cs4530/hw3-handout/node_modules/@stryker-mutator/core/dist/src/reporters/index.js"],"appendPlugins":[],"jsonReporter":{"fileName":"reports/mutation/mutation.json"},"disableTypeChecks":"{test,src,lib}/**/*.{js,ts,jsx,tsx,html,vue}","symlinkNodeModules":true,"cleanTempDir":true,"testRunnerNodeArgs":[],"thresholds":{"high":80,"low":60,"break":null},"dryRunTimeoutMinutes":5,"warnings":true,"disableBail":false,"configFile":"/Users/carolinehughes/nu/cs4530/hw3-handout/stryker.conf.json","jest":{"projectType":"custom","enableFindRelatedTests":true}},"framework":{"name":"StrykerJS","version":"5.6.1","branding":{"homepageUrl":"https://stryker-mutator.io","imageUrl":"data:image/svg+xml;utf8,%3Csvg viewBox='0 0 1458 1458' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' clip-rule='evenodd' stroke-linejoin='round' stroke-miterlimit='2'%3E%3Cpath fill='none' d='M0 0h1458v1458H0z'/%3E%3CclipPath id='a'%3E%3Cpath d='M0 0h1458v1458H0z'/%3E%3C/clipPath%3E%3Cg clip-path='url(%23a)'%3E%3Cpath d='M1458 729c0 402.655-326.345 729-729 729S0 1131.655 0 729C0 326.445 326.345 0 729 0s729 326.345 729 729' fill='%23e74c3c' fill-rule='nonzero'/%3E%3Cpath d='M778.349 1456.15L576.6 1254.401l233-105 85-78.668v-64.332l-257-257-44-187-50-208 251.806-82.793L1076.6 389.401l380.14 379.15c-19.681 367.728-311.914 663.049-678.391 687.599z' fill-opacity='.3'/%3E%3Cpath d='M753.4 329.503c41.79 0 74.579 7.83 97.925 25.444 23.571 18.015 41.69 43.956 55.167 77.097l11.662 28.679 165.733-58.183-14.137-32.13c-26.688-60.655-64.896-108.61-114.191-144.011-49.329-35.423-117.458-54.302-204.859-54.302-50.78 0-95.646 7.376-134.767 21.542-40.093 14.671-74.09 34.79-102.239 60.259-28.84 26.207-50.646 57.06-65.496 92.701-14.718 35.052-22.101 72.538-22.101 112.401 0 72.536 20.667 133.294 61.165 182.704 38.624 47.255 98.346 88.037 179.861 121.291 42.257 17.475 78.715 33.125 109.227 46.994 27.193 12.361 49.294 26.124 66.157 41.751 15.309 14.186 26.497 30.584 33.63 49.258 7.721 20.214 11.16 45.69 11.16 76.402 0 28.021-4.251 51.787-13.591 71.219-8.832 18.374-20.171 33.178-34.523 44.219-14.787 11.374-31.193 19.591-49.393 24.466-19.68 5.359-39.14 7.993-58.69 7.993-29.359 0-54.387-3.407-75.182-10.747-20.112-7.013-37.144-16.144-51.259-27.486-13.618-11.009-24.971-23.766-33.744-38.279-9.64-15.8-17.272-31.924-23.032-48.408l-10.965-31.376-161.669 60.585 10.734 30.124c10.191 28.601 24.197 56.228 42.059 82.748 18.208 27.144 41.322 51.369 69.525 72.745 27.695 21.075 60.904 38.218 99.481 51.041 37.777 12.664 82.004 19.159 132.552 19.159 49.998 0 95.818-8.321 137.611-24.622 42.228-16.471 78.436-38.992 108.835-67.291 30.719-28.597 54.631-62.103 71.834-100.642 17.263-38.56 25.923-79.392 25.923-122.248 0-54.339-8.368-100.37-24.208-138.32-16.29-38.759-38.252-71.661-65.948-98.797-26.965-26.418-58.269-48.835-93.858-67.175-33.655-17.241-69.196-33.11-106.593-47.533-35.934-13.429-65.822-26.601-89.948-39.525-22.153-11.868-40.009-24.21-53.547-37.309-11.429-11.13-19.83-23.678-24.718-37.664-5.413-15.49-7.98-33.423-7.98-53.577 0-40.883 11.293-71.522 37.086-90.539 28.443-20.825 64.985-30.658 109.311-30.658z' fill='%23f1c40f' fill-rule='nonzero'/%3E%3Cpath d='M720 0h18v113h-18zM1458 738v-18h-113v18h113zM720 1345h18v113h-18zM113 738v-18H0v18h113z'/%3E%3C/g%3E%3C/svg%3E"},"dependencies":{"@stryker-mutator/jest-runner":"5.6.1","@stryker-mutator/typescript-checker":"5.6.1","jest":"26.6.3","typescript":"4.5.5","ts-jest":"26.5.6"}}}